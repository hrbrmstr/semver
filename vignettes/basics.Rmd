---
title: "semver: Basics"
author: "John D Harrison"
date: "`r Sys.Date()`"
output: 
  rmarkdown::html_vignette:
    toc: true
    toc_depth: 3
vignette: >
  %\VignetteIndexEntry{semver: Basics}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

The goal of this vignette is to describe the basic functionality of the 
`semver` package.

## Introduction

The `semver` package provides tools and functions for parsing, rendering 
and operating on semantic version strings. Semantic versioning is a simple 
set of rules and requirements that dictate how version numbers are 
assigned and incremented as outlined at [http://semver.org](http://semver.org).

A basic summary of how semantiv versioning operates is given a version number MAJOR.MINOR.PATCH, increment the:

1. MAJOR version when you make incompatible API changes,
2. MINOR version when you add functionality in a backwards-compatible manner, and
3. PATCH version when you make backwards-compatible bug fixes.

Additional labels for pre-release and build metadata are available as extensions to the MAJOR.MINOR.PATCH format.

## `semver` package

The `semver` package provides a wrapper for the C++14 semantic versioning parser
written by Marko Živanović. The project is currently hosted on 
[github](https://github.com/zmarko/semver). The [Rcpp package](https://github.com/RcppCore/Rcpp) was used to provide R bindings. Some 
changes were made on the C++ side as currently CRAN does not accept packages
compiling under C++14 (R version 3.4.0 should allow this in future).

### All the functions

#### parse_version
The `parse_version` function parses a character vector containing valid 
semantic versioning strings returning an "svlist" object. 

```{r example1}
library(semver)
examples <- c("1.0.0", "2.1.3", "1.0.0-alpha", "1.0.0-alpha+1.2", 
              "1.8.2-beta.1.13", "1.8.2-beta.1.10")
sem_versions <- parse_version(examples)
sem_versions
str(sem_versions)
```

#### render_version
The `render_version` function acts on an "svptr"/"svlist" object. It 
returns an R list/(list of lists) giving the major, minor and patch 
version as an integer and the prerelease and build version as a charcter 

```{r example1a}
render_version(sem_versions[c(1, 4)])
render_version(sem_versions[[5]])
str(render_version(sem_versions[[5]]))
```

### Comparing versions

The `parse_version` function returns a list of `svptr` objects. These `svptr`
objects represent the semantic versions. We can do comparisons like:

#### svptr Ops

```{r example2}
sem_versions[[1]] <= sem_versions[[5]]
sem_versions[[1]] > sem_versions[[5]]

# compare example 5, 6 (pre-release ordering matters)
sem_versions[[5]] > sem_versions[[6]]

# compare example 3, 4 (build order does not matter)
sem_versions[[3]] == sem_versions[[4]]
```

#### Summary of svlist objects

You can get the min, max and range of the versions

```{r example3}
min(sem_versions)
max(sem_versions)
range(sem_versions)
```

#### Sort, Order and rank an svlist
You can sort, order and rank the versions:
```{r example4}
sort(sem_versions)
order(sem_versions)
rank(sem_versions)
```

#### Ops on svlist

You can also compare "svlist" objects. If the lengths of the two lists are
unequal recycling occurs:

```{r example4a}
sem_versions > sem_versions[1]

```

## Compare to character strings

Sometimes it can be useful to compare a parsed vector of semantic versions to a 
character string:

```{r example5}
sem_versions > "1.1.0-beta"
sem_versions[sem_versions > "1.1.0-beta"]
```
